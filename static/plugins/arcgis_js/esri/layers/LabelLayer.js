// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.19/esri/copyright.txt for details.
//>>built
require({cache:{"esri/PopupInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/i18n dojo/has dojo/Deferred dojo/sniff dojo/promise/all ./lang ./kernel ./request ./tasks/query ./tasks/QueryTask ./tasks/StatisticDefinition dojo/i18n!dojo/cldr/nls/number".split(" "),function(B,z,A,E,C,F,k,d,a,c,g,e,f,b,h,m){B=B(null,{declaredClass:"esri.PopupInfo",initialize:function(a,b){if(a){z.mixin(this,b);this.info=a;this.title=this.getTitle;this.content=this.getContent;
var c=this._fieldLabels={},f=this._fieldsMap={};a.fieldInfos&&A.forEach(a.fieldInfos,function(a){var b=a.fieldName.toLowerCase();c[b]=a.label;f[b]=a});this._relatedFieldPrefix="relationships/";this.titleHasRelatedFields=!!(a.title&&-1!==a.title.indexOf("{"+this._relatedFieldPrefix))}},toJson:function(){return E.fromJson(E.toJson(this.info))},getTitle:function(){},getContent:function(){},getFieldInfo:function(a){var b;A.some(this.info&&this.info.fieldInfos,function(c){c.fieldName===a&&(b=c);return!!b});
return b},getComponents:function(a){var b=this.info,c=new k,f,d;b.fieldInfos&&(d=A.filter(b.fieldInfos,function(a){return-1!==a.fieldName.indexOf(this._relatedFieldPrefix)},this));d&&0<d.length&&(f=this._getRelatedRecords({graphic:a,fieldsInfo:d}));f?f.always(z.hitch(this,function(){c.resolve(this._getPopupValues(a))})):c.resolve(this._getPopupValues(a));return c.promise},getAttachments:function(a){var b=a.getLayer();a=a.attributes;if(this.info.showAttachments&&(b&&b.hasAttachments&&b.objectIdField)&&
(a=a&&a[b.objectIdField]))return b.queryAttachmentInfos(a)},_getPopupValues:function(a,b){var f=this.info,d=a.getLayer(),e=z.clone(a.attributes)||{},h=z.clone(e),m=f.fieldInfos,g="",q="",w,t,x,k,G,I=d&&d._getDateOpts&&d._getDateOpts().properties,I=I&&I.slice(0),H={dateFormat:{properties:I,formatter:"DateFormat"+this._insertOffset(this._dateFormats.shortDateShortTime)}};if(this._relatedInfo)for(k in this._relatedInfo)if(this._relatedInfo.hasOwnProperty(k)){var J=this._relatedInfo[k],K=this._relatedLayersInfo[k];
J&&(A.forEach(J.relatedFeatures,function(a){for(G in a.attributes)if(a.attributes.hasOwnProperty(G)&&"esriRelCardinalityOneToOne"===K.relation.cardinality){var b=this._toRelatedFieldName([K.relation.id,G]);e[b]=h[b]=a.attributes[G]}},this),A.forEach(J.relatedStatsFeatures,function(a){for(G in a.attributes)if(a.attributes.hasOwnProperty(G)){var b=this._toRelatedFieldName([K.relation.id,G]);e[b]=h[b]=a.attributes[G]}},this))}m&&A.forEach(m,function(a){t=a.fieldName;var b=this._getLayerFieldInfo(d,t);
b&&(t=a.fieldName=b.name);h[t]=this._formatValue(h[t],t,H);I&&(a.format&&a.format.dateFormat)&&(a=A.indexOf(I,t),-1<a&&I.splice(a,1))},this);if(d){k=d.types;var B=(J=d.typeIdField)&&e[J];for(t in e)if(e.hasOwnProperty(t)&&-1===t.indexOf(this._relatedFieldPrefix)&&(x=e[t],c.isDefined(x))){var C=this._getDomainName(d,a,k,B,t,x);c.isDefined(C)?h[t]=C:t===J&&(C=this._getTypeName(d,a,x),c.isDefined(C)&&(h[t]=C))}}f.title&&(g=this._processFieldsInLinks(this._fixTokens(f.title,d),e),g=z.trim(c.substitute(h,
g,H)||""));if(b)return{title:g};f.description&&(q=this._processFieldsInLinks(this._fixTokens(f.description,d),e),q=z.trim(c.substitute(h,q,H)||""));m&&(w=[],A.forEach(m,function(a){(t=a.fieldName)&&a.visible&&w.push([a.label||t,c.substitute(h,"${"+t+"}",H)||""])}));var E,F;f.mediaInfos&&(E=[],A.forEach(f.mediaInfos,function(a){F=0;x=a.value;switch(a.type){case "image":var b=x.sourceURL,b=b&&z.trim(c.substitute(e,this._fixTokens(b,d)));F=!!b;break;case "piechart":case "linechart":case "columnchart":case "barchart":var w,
b=x.normalizeField;x.fields=A.map(x.fields,function(a){return(w=this._getLayerFieldInfo(d,a))?w.name:a},this);b&&(w=this._getLayerFieldInfo(d,b),x.normalizeField=w?w.name:b);F=A.some(x.fields,function(a){return c.isDefined(e[a])||-1!==a.indexOf(this._relatedFieldPrefix)&&this._relatedInfo},this);break;default:return}if(F){a=z.clone(a);x=a.value;var b=a.title?this._processFieldsInLinks(this._fixTokens(a.title,d),e):"",f=a.caption?this._processFieldsInLinks(this._fixTokens(a.caption,d),e):"";a.title=
b?z.trim(c.substitute(h,b,H)||""):"";a.caption=f?z.trim(c.substitute(h,f,H)||""):"";if("image"===a.type)x.sourceURL=c.substitute(e,this._fixTokens(x.sourceURL,d)),x.linkURL&&(x.linkURL=z.trim(c.substitute(e,this._fixTokens(x.linkURL,d))||""));else{var n,u;A.forEach(x.fields,function(a,b){if(-1!==a.indexOf(this._relatedFieldPrefix))u=this._getRelatedChartInfos(a,x,e,H),u instanceof Array?x.fields=u:x.fields[b]=u;else{var c=e[a],c=void 0===c?null:c;n=e[x.normalizeField]||0;c&&n&&(c/=n);x.fields[b]=
{y:c,tooltip:(this._fieldLabels[a.toLowerCase()]||a)+":\x3cbr/\x3e"+this._formatValue(c,a,H,!!n)}}},this)}E.push(a)}},this));return{title:g,description:q,hasDescription:!!f.description,fields:w&&w.length?w:null,mediaInfos:E&&E.length?E:null,formatted:h,editSummary:d&&d.getEditSummary?d.getEditSummary(a):""}},_getRelatedChartInfos:function(a,b,c,d){var e,f,h,m,g,w;e=[];w=this._fromRelatedFieldName(a);g=w[0];f=this._relatedInfo[g];g=this._relatedLayersInfo[g];f&&A.forEach(f.relatedFeatures,function(f){f=
f.attributes;var g,p;for(p in f)if(f.hasOwnProperty(p)&&p===w[1]){g={};m=f[p];b.normalizeField&&(h=-1!==b.normalizeField.indexOf(this._relatedFieldPrefix)?f[this._fromRelatedFieldName(b.normalizeField)[1]]:c[b.normalizeField]);m&&h&&(m/=h);if(b.tooltipField)if(-1!==b.tooltipField.indexOf(this._relatedFieldPrefix)){var q=this._fromRelatedFieldName(b.tooltipField)[1];g.tooltip=f[q]&&"string"===typeof f[q]?f[q]+":\x3cbr/\x3e"+this._formatValue(m,f[q],d,!!h):q+":\x3cbr/\x3e"+this._formatValue(m,q,d,!!h)}else g.tooltip=
(this._fieldLabels[a.toLowerCase()]||a)+":\x3cbr/\x3e"+this._formatValue(m,b.tooltipField,d,!!h);else g.tooltip=m;g.y=m;e.push(g)}},this);return"esriRelCardinalityOneToMany"===g.relation.cardinality||"esriRelCardinalityManyToMany"===g.relation.cardinality?e:e[0]},_dateFormats:{shortDate:"(datePattern: 'M/d/y', selector: 'date')",shortDateLE:"(datePattern: 'd/M/y', selector: 'date')",longMonthDayYear:"(datePattern: 'MMMM d, y', selector: 'date')",dayShortMonthYear:"(datePattern: 'd MMM y', selector: 'date')",
longDate:"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",shortDateShortTime:"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateLEShortTime:"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateShortTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLEShortTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLongTime:"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",
shortDateLELongTime:"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLongTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",shortDateLELongTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthYear:"(datePattern: 'MMMM y', selector: 'date')",shortMonthYear:"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"},_reHref:/href\s*=\s*\"([^\"]+)\"/ig,_reHrefApos:/href\s*=\s*\'([^\']+)\'/ig,
_fixTokens:function(a,b){var c=this;return a.replace(/(\{([^\{\r\n]+)\})/g,function(a,f,d){a=c._getLayerFieldInfo(b,d);return"$"+(a?"{"+a.name+"}":f)})},_encodeAttributes:function(a){a=z.clone(a)||{};var b,c;for(b in a)if((c=a[b])&&"string"===typeof c)c=encodeURIComponent(c).replace(/\'/g,"\x26apos;"),a[b]=c;return a},_processFieldsInLinks:function(a,b){var c=this._encodeAttributes(b),f=this;a&&(a=a.replace(this._reHref,function(a,d){return f._addValuesToHref(a,d,b,c)}).replace(this._reHrefApos,function(a,
d){return f._addValuesToHref(a,d,b,c)}));return a},_addValuesToHref:function(a,b,f,d){b=b&&z.trim(b);return c.substitute(b&&0===b.indexOf("${")?f:d,a)},_getLayerFieldInfo:function(a,b){return a&&a.getField?a.getField(b):null},_formatValue:function(a,b,f,d){var e=this._fieldsMap[b.toLowerCase()],h=e&&e.format;b=-1!==A.indexOf(f.dateFormat.properties,b);var g="number"===typeof a&&!b&&(!h||!h.dateFormat);if(!c.isDefined(a)||!e||!c.isDefined(h))return g?this._forceLTR(a):a;var k="",e=[],q=h.hasOwnProperty("places")||
h.hasOwnProperty("digitSeparator"),w=h.hasOwnProperty("digitSeparator")?h.digitSeparator:!0;if(q&&!b)k="NumberFormat",e.push("places: "+(c.isDefined(h.places)&&(!d||0<h.places)?Number(h.places):"Infinity")),e.length&&(k+="("+e.join(",")+")");else if(h.dateFormat)k="DateFormat"+this._insertOffset(this._dateFormats[h.dateFormat]||this._dateFormats.shortDateShortTime);else return g?this._forceLTR(a):a;var t=this._applyFormatting(a,k,f);q&&-1<a.constructor.toString().indexOf("Array")&&(t="",A.forEach(a,
z.hitch(this,function(a,b){b&&(t+=" ");t+=this._applyFormatting(a,k,f)})));q&&!w&&m.group&&(t=t.replace(RegExp("\\"+m.group,"g"),""));b&&(t='\x3cspan class\x3d"esriDateValue"\x3e'+t+"\x3c/span\x3e");return g?this._forceLTR(t):t},_applyFormatting:function(a,b,f){return c.substitute({myKey:a},"${myKey:"+b+"}",f)||""},_forceLTR:function(a){var b=d("ie");return b&&10>=b?a:"\x3cspan class\x3d'esriNumericValue'\x3e"+a+"\x3c/span\x3e"},_insertOffset:function(a){a&&(a=c.isDefined(this.utcOffset)?a.replace(/\)\s*$/,
", utcOffset:"+this.utcOffset+")"):a);return a},_getDomainName:function(a,b,c,f,d,e){return(a=a.getDomain&&a.getDomain(d,{feature:b}))&&a.codedValues?a.getName(e):null},_getTypeName:function(a,b,c){return(a=a.getType&&a.getType(b))&&a.name},_getRelatedRecords:function(a){var b=a.graphic,c=new k,f;this._relatedLayersInfo?this._queryRelatedLayers(b).then(z.hitch(this,function(a){this._setRelatedRecords(b,a);c.resolve(a)}),z.hitch(this,this._handlerErrorResponse,c)):this._getRelatedLayersInfo(a).then(z.hitch(this,
function(a){for(f in a)a.hasOwnProperty(f)&&a[f]&&(this._relatedLayersInfo[f].relatedLayerInfo=a[f]);this._queryRelatedLayers(b).then(z.hitch(this,function(a){this._setRelatedRecords(b,a);c.resolve(a)}),z.hitch(this,this._handlerErrorResponse,c))}),z.hitch(this,this._handlerErrorResponse,c));return c.promise},_getRelatedLayersInfo:function(b){var c=b.fieldsInfo,f,d,g={};f=b.graphic.getLayer();this._relatedLayersInfo||(this._relatedLayersInfo={});A.forEach(c,function(a){var b,c,d,e;b=this._fromRelatedFieldName(a.fieldName);
c=b[0];b=b[1];c&&(this._relatedLayersInfo[c]||(A.some(f.relationships,function(a){if(a.id==c)return e=a,!0}),e&&(this._relatedLayersInfo[c]={relation:e,relatedFields:[],outStatistics:[]})),this._relatedLayersInfo[c]&&(this._relatedLayersInfo[c].relatedFields.push(b),a.statisticType&&(d=new h,d.statisticType=a.statisticType,d.onStatisticField=b,d.outStatisticFieldName=b,this._relatedLayersInfo[c].outStatistics.push(d))))},this);for(d in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(d)&&
this._relatedLayersInfo[d]&&(b=this._relatedLayersInfo[d].relation,b=f.url.replace(/[0-9]+$/,b.relatedTableId),this._relatedLayersInfo[d].relatedLayerUrl=b,g[d]=e({url:b,content:{f:"json"},callbackParamName:"callback"}));return a(g)},_queryRelatedLayers:function(b){var c={},f;for(f in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(f)&&(c[f]=this._queryRelatedLayer({graphic:b,relatedInfo:this._relatedLayersInfo[f]}));return a(c)},_queryRelatedLayer:function(c){var d,e,h,g,m,k,v,q,w,
t;d=c.graphic;e=d.getLayer().url.match(/[0-9]+$/g)[0];q=c.relatedInfo;v=q.relatedLayerInfo;w=q.relatedLayerUrl;t=q.relation;A.some(v.relationships,function(a){if(a.relatedTableId===parseInt(e,10))return h=a,!0},this);h&&(c=new f,A.some(v.fields,function(a){if(a.name===h.keyField)return m=-1!==A.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],a.type)?"number":"string",!0}),g="string"===m?h.keyField+"\x3d'"+d.attributes[t.keyField]+"'":h.keyField+
"\x3d"+d.attributes[t.keyField],c.where=g,c.outFields=q.relatedFields,q.outStatistics&&(0<q.outStatistics.length&&v.supportsStatistics)&&(k=new f,k.where=c.where,k.outFields=c.outFields,k.outStatistics=q.outStatistics),d=new b(w),g=[],g.push(d.execute(c)),k&&g.push(d.execute(k)));return a(g)},_setRelatedRecords:function(a,b){this._relatedInfo=[];for(var d in b)if(b.hasOwnProperty(d)&&b[d]){var f=b[d];this._relatedInfo[d]={};this._relatedInfo[d].relatedFeatures=f[0].features;c.isDefined(f[1])&&(this._relatedInfo[d].relatedStatsFeatures=
f[1].features)}},_handlerErrorResponse:function(a,b){a.reject(b)},_fromRelatedFieldName:function(a){var b=[];-1!==a.indexOf(this._relatedFieldPrefix)&&(a=a.split("/"),b=a.slice(1));return b},_toRelatedFieldName:function(a){var b="";a&&0<a.length&&(b=this._relatedFieldPrefix+a[0]+"/"+a[1]);return b}});F("extend-esri")&&(g.PopupInfo=g.PopupInfoTemplate=B);return B})},"esri/tasks/QueryTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has ../kernel ../request ../deferredUtils ../geometry/Extent ../geometry/normalizeUtils ./Task ./FeatureSet".split(" "),
function(B,z,A,E,C,F,k,d,a,c,g,e,f){B=B(e,{declaredClass:"esri.tasks.QueryTask",_eventMap:{complete:["featureSet"],"execute-for-count-complete":["count"],"execute-for-ids-complete":["objectIds"],"execute-relationship-query-complete":["featureSets"]},constructor:function(a,c){this._handler=z.hitch(this,this._handler);this._relationshipQueryHandler=z.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=z.hitch(this,this._executeForIdsHandler);this._countHandler=z.hitch(this,this._countHandler);
this._extentHandler=z.hitch(this,this._extentHandler);this.source=c&&c.source;this.gdbVersion=c&&c.gdbVersion;this.registerConnectEvents()},__msigns:[{n:"execute",c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForExtent",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},
onExecuteForExtentComplete:function(){},execute:function(a,c,f,e,g){var l=g.assembly;a=this._encode(z.mixin({},this._url.query,{f:"json"},a.toJson(l&&l[0])));var k=this._handler,r=this._errorHandler;this.source&&(l={source:this.source.toJson()},a.layer=C.toJson(l));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return d({url:this._url.path+"/query",content:a,callbackParamName:"callback",load:function(a,b){k(a,b,c,f,g.dfd)},error:function(a){r(a,f,g.dfd)},callbackSuffix:e},this.requestOptions)},executeRelationshipQuery:function(b,
c,f){b=this._encode(z.mixin({},this._url.query,{f:"json"},b.toJson()));var e=this._relationshipQueryHandler,g=this._errorHandler;this.gdbVersion&&(b.gdbVersion=this.gdbVersion);var l=new E(a._dfdCanceller);l._pendingDfd=d({url:this._url.path+"/queryRelatedRecords",content:b,callbackParamName:"callback",load:function(a,b){e(a,b,c,f,l)},error:function(a){g(a,f,l)}},this.requestOptions);return l},executeForIds:function(a,c,f,e){var g=e.assembly;a=this._encode(z.mixin({},this._url.query,{f:"json",returnIdsOnly:!0},
a.toJson(g&&g[0])));var l=this._executeForIdsHandler,k=this._errorHandler;this.source&&(g={source:this.source.toJson()},a.layer=C.toJson(g));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return d({url:this._url.path+"/query",content:a,callbackParamName:"callback",load:function(a,b){l(a,b,c,f,e.dfd)},error:function(a){k(a,f,e.dfd)}},this.requestOptions)},executeForCount:function(a,c,f,e){var g=e.assembly;a=this._encode(z.mixin({},this._url.query,{f:"json",returnIdsOnly:!0,returnCountOnly:!0},a.toJson(g&&
g[0])));var l=this._countHandler,k=this._errorHandler;this.source&&(g={source:this.source.toJson()},a.layer=C.toJson(g));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return d({url:this._url.path+"/query",content:a,callbackParamName:"callback",load:function(a,b){l(a,b,c,f,e.dfd)},error:function(a){k(a,f,e.dfd)}},this.requestOptions)},executeForExtent:function(a,c,f,e){var g=e.assembly;a=this._encode(z.mixin({},this._url.query,{f:"json",returnExtentOnly:!0,returnCountOnly:!0},a.toJson(g&&g[0])));
var l=this._extentHandler,k=this._errorHandler;this.source&&(g={source:this.source.toJson()},a.layer=C.toJson(g));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return d({url:this._url.path+"/query",content:a,callbackParamName:"callback",load:function(a,b){l(a,b,c,f,e.dfd)},error:function(a){k(a,f,e.dfd)}},this.requestOptions)},_handler:function(a,c,d,e,g){try{var l=new f(a);this._successHandler([l],"onComplete",d,g)}catch(k){this._errorHandler(k,e,g)}},_relationshipQueryHandler:function(a,c,d,e,
g){try{var l=a.geometryType,k=a.spatialReference,r={};A.forEach(a.relatedRecordGroups,function(a){var b={};b.geometryType=l;b.spatialReference=k;b.features=a.relatedRecords;b=new f(b);if(null!=a.objectId)r[a.objectId]=b;else for(var c in a)a.hasOwnProperty(c)&&"relatedRecords"!==c&&(r[a[c]]=b)});this._successHandler([r],"onExecuteRelationshipQueryComplete",d,g)}catch(p){this._errorHandler(p,e,g)}},_executeForIdsHandler:function(a,c,f,d,e){try{this._successHandler([a.objectIds],"onExecuteForIdsComplete",
f,e)}catch(g){this._errorHandler(g,d,e)}},_countHandler:function(a,c,f,d,e){try{var g,k=a.features,r=a.objectIds;if(r)g=r.length;else{if(k)throw Error("Unable to perform query. Please check your parameters.");g=a.count}this._successHandler([g],"onExecuteForCountComplete",f,e)}catch(p){this._errorHandler(p,d,e)}},_extentHandler:function(a,f,d,e,g){try{a.extent&&(a.extent=new c(a.extent)),this._successHandler([a],"onExecuteForExtentComplete",d,g)}catch(l){this._errorHandler(l,e,g)}}});g._createWrappers(B);
F("extend-esri")&&z.setObject("tasks.QueryTask",B,k);return B})},"esri/tasks/Task":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),function(B,z,A,E,C,F,k,d){B=B(d,{declaredClass:"esri.tasks._Task",_eventMap:{error:["error"],complete:["result"]},constructor:function(a,c){a&&z.isString(a)&&(this._url=k.urlToObject(this.url=a));c&&c.requestOptions&&(this.requestOptions=c.requestOptions);this.normalization=!0;
this._errorHandler=z.hitch(this,this._errorHandler);this.registerConnectEvents()},_useSSL:function(){var a=this._url,c=/^http:/i;this.url&&(this.url=this.url.replace(c,"https:"));a&&a.path&&(a.path=a.path.replace(c,"https:"))},_encode:function(a,c,d){var e,f,b={},h,m;for(h in a)if("declaredClass"!==h&&(e=a[h],f=typeof e,null!==e&&void 0!==e&&"function"!==f))if(z.isArray(e)){b[h]=[];m=e.length;for(f=0;f<m;f++)b[h][f]=this._encode(e[f])}else"object"===f?e.toJson&&(f=e.toJson(d&&d[h]),"esri.tasks.FeatureSet"===
e.declaredClass&&f.spatialReference&&(f.sr=f.spatialReference,delete f.spatialReference),b[h]=c?f:A.toJson(f)):b[h]=e;return b},_successHandler:function(a,c,d,e){c&&this[c].apply(this,a);d&&d.apply(null,a);e&&F._resDfd(e,a)},_errorHandler:function(a,c,d){this.onError(a);c&&c(a);d&&d.errback(a)},setNormalization:function(a){this.normalization=a},onError:function(){}});E("extend-esri")&&(C.Task=B);return B})},"esri/tasks/FeatureSet":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../graphic ../SpatialReference ../graphicsUtils ../geometry/jsonUtils ../symbols/jsonUtils".split(" "),
function(B,z,A,E,C,F,k,d,a,c,g){B=B(null,{declaredClass:"esri.tasks.FeatureSet",constructor:function(a){if(a){z.mixin(this,a);var f=this.features,b=a.spatialReference,h=c.getGeometryType(a.geometryType),b=this.spatialReference=new d(b);this.geometryType=a.geometryType;a.fields&&(this.fields=a.fields);A.forEach(f,function(a,c){var d=a.geometry&&a.geometry.spatialReference;f[c]=new k(h&&a.geometry?new h(a.geometry):null,a.symbol&&g.fromJson(a.symbol),a.attributes);f[c].geometry&&!d&&f[c].geometry.setSpatialReference(b)});
this._hydrate()}else this.features=[]},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(d){var f={};this.displayFieldName&&(f.displayFieldName=this.displayFieldName);this.fields&&(f.fields=this.fields);this.spatialReference?f.spatialReference=this.spatialReference.toJson():this.features[0]&&this.features[0].geometry&&(f.spatialReference=this.features[0].geometry.spatialReference.toJson());this.features[0]&&(this.features[0].geometry&&(f.geometryType=
c.getJsonType(this.features[0].geometry)),f.features=a._encodeGraphics(this.features,d));f.exceededTransferLimit=this.exceededTransferLimit;f.transform=this.transform;return F.fixJson(f)},_hydrate:function(){var a=this.transform,c=this.geometryType;if(a&&c)for(var b=this.features,d=a.translate[0],g=a.translate[1],k=a.scale[0],n=a.scale[1],l=function(a,b,c){if("esriGeometryPoint"===a)return function(a){a.x=b(a.x);a.y=c(a.y)};if("esriGeometryPolyline"===a||"esriGeometryPolygon"===a)return function(a){a=
a.rings||a.paths;var d,f,e,g,h,m,l,k;d=0;for(f=a.length;d<f;d++){h=a[d];e=0;for(g=h.length;e<g;e++)m=h[e],0<e?(l+=m[0],k+=m[1]):(l=m[0],k=m[1]),m[0]=b(l),m[1]=c(k)}};if("esriGeometryEnvelope"===a)return function(a){a.xmin=b(a.xmin);a.ymin=c(a.ymin);a.xmax=b(a.xmax);a.ymax=c(a.ymax)};if("esriGeometryMultipoint"===a)return function(a){a=a.points;var d,f,e,g,h;d=0;for(f=a.length;d<f;d++)e=a[d],0<d?(g+=e[0],h+=e[1]):(g=e[0],h=e[1]),e[0]=b(g),e[1]=c(h)}}(c,function(a){return a*k+d},function(a){return g-
a*n}),a=0,c=b.length;a<c;a++)b[a].geometry&&l(b[a].geometry);this.transform=null},quantize:function(a){if(!this.geometryType)return this.transform=null,this;var c=a.translate[0],b=a.translate[1],d=a.scale[0],g=a.scale[1],k=this.features,n=function(a,b,c){var d,f,e,g,h,m,l=[];d=0;for(f=a.length;d<f;d++)if(e=a[d],0<d){if(m=b(e[0]),e=c(e[1]),m!==g||e!==h)l.push([m-g,e-h]),g=m,h=e}else g=b(e[0]),h=c(e[1]),l.push([g,h]);return 0<l.length?l:null},l=function(a,b,c){if("esriGeometryPoint"===a)return function(a){a.x=
b(a.x);a.y=c(a.y);return a};if("esriGeometryPolyline"===a||"esriGeometryPolygon"===a)return function(a){var d,f,e,g,h;e=a.rings||a.paths;h=[];d=0;for(f=e.length;d<f;d++)g=e[d],(g=n(g,b,c))&&h.push(g);return 0<h.length?(a.rings?a.rings=h:a.paths=h,a):null};if("esriGeometryMultipoint"===a)return function(a){var d;d=n(a.points,b,c);return 0<d.length?(a.points=d,a):null};if("esriGeometryEnvelope"===a)return function(a){return a}}(this.geometryType,function(a){return Math.round((a-c)/d)},function(a){return Math.round((b-
a)/g)}),s,r;s=0;for(r=k.length;s<r;s++)k[s].geometry&&(l(k[s].geometry)||k[s].setGeometry(null));this.transform=a;return this}});E("extend-esri")&&z.setObject("tasks.FeatureSet",B,C);return B})},"esri/tasks/StatisticDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(B,z,A,E){B=B(null,{declaredClass:"esri.tasks.StatisticDefinition",toJson:function(){return{statisticType:this.statisticType,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,
maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount}}});A("extend-esri")&&z.setObject("tasks.StatisticDefinition",B,E);return B})},"esri/layers/labelLayerUtils/DynamicLabelClass":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../../kernel ../../geometry/Extent ../../geometry/Polygon".split(" "),function(B,z,A,E,C,F){B=B(null,{declaredClass:"esri.layers.labelLayerUtils.DynamicLabelClass",constructor:function(){this._preparedLabels=
[];this._placedLabels=[];this._extent=null;this._y1=this._x1=this._y0=this._x0=this._ymax=this._ymin=this._xmax=this._xmin=0;this._scale=1},setMap:function(k,d){this._labelLayer=d;this._xmin=k.extent.xmin;this._xmax=k.extent.xmax;this._ymin=k.extent.ymin;this._ymax=k.extent.ymax;this._scale=(this._xmax-this._xmin)/k.width},_process:function(k){this._preparedLabels=k;this._placedLabels=[];var d;for(k=this._preparedLabels.length-1;0<=k;k--){var a=this._preparedLabels[k],c=Math.min(a.labelWidth,a.labelHeight),
g=a.labelWidth+0*c,c=a.labelHeight+0*c,e=(d=a.options)&&void 0!==d.lineLabelPlacement?d.lineLabelPlacement:"PlaceAtCenter",f=d&&void 0!==d.lineLabelPosition?d.lineLabelPosition:"Above",b=d&&void 0!==d.pointPriorities?d.pointPriorities:"AboveRight",h=[2,2,1,3,0,2,3,3,2];"AboveLeft"==b?h=[1,2,2,2,0,3,2,3,3]:"AboveCenter"==b?h=[2,1,2,2,0,2,3,3,3]:"AboveRight"==b?h=[2,2,1,3,0,2,3,3,2]:"CenterLeft"==b?h=[2,2,3,1,0,3,2,2,3]:"CenterCenter"==b?h=[0,0,0,0,1,0,0,0,0]:"CenterRight"==b?h=[3,2,2,3,0,1,3,2,2]:
"BelowLeft"==b?h=[2,3,3,2,0,3,1,2,2]:"BelowCenter"==b?h=[3,3,3,2,0,2,2,1,2]:"BelowRight"==b&&(h=[3,3,2,3,0,2,2,2,1]);var m=d&&void 0!==d.labelRotation?d.labelRotation:!0,b=a.angle*(Math.PI/180);d=d&&void 0!==d.howManyLabels?d.howManyLabels:"OneLabel";if("point"==a.geometry.type)this._generatePointPositions(a,a.geometry.x,a.geometry.y,a.text,b,g,c,a.symbolWidth,a.symbolHeight,h);else if("multipoint"==a.geometry.type){e=a.geometry;for(f=0;f<e.points.length;f++)this._generatePointPositions(a,e.points[f][0],
e.points[f][1],a.text,b,g,c,a.symbolWidth,a.symbolHeight,h)}else"polyline"==a.geometry.type?this._generateLinePositions(a,a.geometry,a.text,g,c,2*a.symbolHeight+c,e,f,m):"polygon"==a.geometry.type&&this._generatePolygonPositions(a,d,a.geometry,a.text,b,g,c)}return this._placedLabels},_generatePointPositions:function(k,d,a,c,g,e,f,b,h,m){b=(b+e)*this._scale;h=(h+f)*this._scale;var u,n;for(u=1;3>=u;u++)for(n=1;9>=n;n++)if(m[n-1]==u)switch(n){case 1:if(this._findPlace(k,c,d-b,a+h,g,e,f))return;break;
case 2:if(this._findPlace(k,c,d,a+h,g,e,f))return;break;case 3:if(this._findPlace(k,c,d+b,a+h,g,e,f))return;break;case 4:if(this._findPlace(k,c,d-b,a,g,e,f))return;break;case 5:if(this._findPlace(k,c,d,a,g,e,f))return;break;case 6:if(this._findPlace(k,c,d+b,a,g,e,f))return;break;case 7:if(this._findPlace(k,c,d-b,a-h,g,e,f))return;break;case 8:if(this._findPlace(k,c,d,a-h,g,e,f))return;break;case 9:if(this._findPlace(k,c,d+b,a-h,g,e,f))return}},_generateLinePositions:function(k,d,a,c,g,e,f,b,h){var m=
c*this._scale*c*this._scale,u,n,l;for(u=0;u<d.paths.length;u++){var s=d.paths[u],r=s.length,p=Math.floor((r-1)/2),y=0!==(r-1)%2?1:-1;"PlaceAtStart"==f&&(p=0,y=1);"PlaceAtEnd"==f&&(p=r-2,y=-1);for(;0<=p&&p<r-1;){for(n=p;n<r;n++){var v=s[p][0],q=s[p][1],w=s[n][0]-v,t=s[n][1]-q;if(w*w+t*t>m){for(var x=Math.atan2(t,w);x>Math.PI/2;)x-=Math.PI;for(;x<-(Math.PI/2);)x+=Math.PI;var D=Math.sin(x),G=Math.cos(x),I=0,H=0;"Above"==b&&(I=e*D*this._scale,H=e*G*this._scale);"Below"==b&&(I=-e*D*this._scale,H=-e*G*
this._scale);if(1==n-p){if(this._clipLine(v,q,s[n][0],s[n][1])&&(v=this._x1-this._x0,l=this._y1-this._y0,v*v+l*l>m&&(n=Math.atan2(l,v),w=c/2+2*g,q=w*this._scale*Math.cos(n),w=w*this._scale*Math.sin(n),"PlaceAtStart"==f?(v=this._x0+q,l=this._y0+w):"PlaceAtEnd"==f?(v=this._x1-q,l=this._y1-w):(v=this._x0+v/2,l=this._y0+l/2),this._findPlace(k,a,v-I,l+H,h?-n:0,c,g))))return}else{var J=0;for(l=p;l<=n;l++)J=Math.max(J,Math.abs((s[l][1]-q)*G-(s[l][0]-v)*D));if(J<g&&this._findPlace(k,a,v+w/2-I,q+t/2+H,h?-x:
0,c,g))return}break}}p+=y}}},_generatePolygonPositions:function(k,d,a,c,g,e,f){var b;if("ManyLabels"==d)for(d=0;d<a.rings.length;d++)b=a.rings[d],F.prototype.isClockwise(b)&&(b=this._findCentroid(b,this._xmin,this._ymin,this._xmax,this._ymax),this._findPlace(k,c,b[0],b[1],g,e,f));else{b=this._findCentroidForFeature(a,this._xmin,this._ymin,this._xmax,this._ymax);var h=b[1],m=0;for(d=0;10>d;d++){m+=f/4;b=this._findCentroidForFeature(a,this._xmin,h+(m-f/4),this._xmax,h+(m+f/4));if(this._findPlace(k,
c,b[0],b[1],g,e,f))break;b=this._findCentroidForFeature(a,this._xmin,h-(m+f/4),this._xmax,h-(m-f/4));if(this._findPlace(k,c,b[0],b[1],g,e,f))break}}},_findCentroid:function(k,d,a,c,g){var e=k.length,f=[0,0],b=0,h=k[0][0],m=k[0][1];h>c&&(h=c);h<d&&(h=d);m>g&&(m=g);m<a&&(m=a);for(var u=1;u<e-1;u++){var n=k[u][0],l=k[u][1],s=k[u+1][0],r=k[u+1][1];n>c&&(n=c);n<d&&(n=d);l>g&&(l=g);l<a&&(l=a);s>c&&(s=c);s<d&&(s=d);r>g&&(r=g);r<a&&(r=a);var p=(n-h)*(r-m)-(s-h)*(l-m);f[0]+=p*(h+n+s);f[1]+=p*(m+l+r);b+=p}f[0]/=
3*b;f[1]/=3*b;if(isNaN(f[0])||isNaN(f[1]))return f;a=[];this._fillBuffer(k,a,f);f[0]=this._sortBuffer(a,f[0],d,c);return f},_findCentroidForFeature:function(k,d,a,c,g){for(var e,f=0,b=[0,0],h=0;h<k.rings.length;h++){var m=k.rings[h],u=m.length,n=m[0][0],l=m[0][1];n>c&&(n=c);n<d&&(n=d);l>g&&(l=g);l<a&&(l=a);for(e=1;e<u-1;e++){var s=m[e][0],r=m[e][1],p=m[e+1][0],y=m[e+1][1];s>c&&(s=c);s<d&&(s=d);r>g&&(r=g);r<a&&(r=a);p>c&&(p=c);p<d&&(p=d);y>g&&(y=g);y<a&&(y=a);var v=(s-n)*(y-l)-(p-n)*(r-l);b[0]+=v*
(n+s+p);b[1]+=v*(l+r+y);f+=v}}b[0]/=3*f;b[1]/=3*f;if(isNaN(b[0])||isNaN(b[1]))return b;a=[];for(e=0;e<k.rings.length;e++)this._fillBuffer(k.rings[e],a,b);b[0]=this._sortBuffer(a,b[0],d,c);return b},_fillBuffer:function(k,d,a){for(var c=k.length-1,g=k[0][1]>=k[c][1]?1:-1,e=0;e<=c;e++){var f=e,b=e+1;e==c&&(b=0);var h=k[f][0],f=k[f][1],m=k[b][0],b=k[b][1],u=b>=f?1:-1;if(f<=a[1]&&a[1]<=b||b<=a[1]&&a[1]<=f)a[1]!=f&&a[1]!=b?(d.push((a[1]-f)*(m-h)/(b-f)+h),g=u):a[1]==f&&a[1]!=b?(g!=u&&d.push(h),g=u):a[1]!=
f&&a[1]==b?(d.push(m),g=u):a[1]==f&&a[1]==b&&(1==g&&d.push(h),d.push(m),g=u)}},_sortBuffer:function(k,d,a,c){var g=k.length;k.sort();if(0<g){for(var e=0,f=d=0;f<g-1;f+=2){var b=Math.abs(k[f+1]-k[f]);!(k[f]<=a&&k[f+1]<=a)&&(!(k[f]>=c&&k[f+1]>=c)&&b>e)&&(e=b,d=f)}g=k[d];k=k[d+1];g>c&&(g=c);g<a&&(g=a);k>c&&(k=c);k<a&&(k=a);d=(g+k)/2}return d},_findPlace:function(k,d,a,c,g,e,f){if(isNaN(a)||isNaN(c))return!1;for(var b=0;b<this._placedLabels.length;b++){var h=this._placedLabels[b].angle,m=this._placedLabels[b].width*
this._scale,u=this._placedLabels[b].height*this._scale,n=this._placedLabels[b].x-a,l=this._placedLabels[b].y-c;if(0===g&&0===h){if(this._findPlace2(-e*this._scale,-f*this._scale,e*this._scale,f*this._scale,n-m,l-u,n+m,l+u))return!1}else{var s=new C(-e*this._scale,-f*this._scale,e*this._scale,f*this._scale,null),r=0,p=1;0!==g&&(r=Math.sin(g),p=Math.cos(g));var y=n*p-l*r,n=n*r+l*p,h=h-g,r=Math.sin(h),p=Math.cos(h),v=-m*p- -u*r,l=-m*r+-u*p,h=+m*p- -u*r,q=+m*r+-u*p,m=y+v,u=n-l,r=y+h,p=n-q,v=y-v,l=n+l,
y=y-h,n=n+q,h=new F;h.addRing([[m,u],[r,p],[v,l],[y,n],[m,u]]);if(s.intersects(h))return!1}}for(;g>Math.PI/2;)g-=Math.PI;for(;g<-(Math.PI/2);)g+=Math.PI;b={};b.layer=k;b.text=d;b.angle=g;b.x=a;b.y=c;b.width=e;b.height=f;this._placedLabels.push(b);return!0},_findPlace2:function(k,d,a,c,g,e,f,b){return(k>=g&&k<=f||a>=g&&a<=f||k<=g&&a>=f)&&(d>=e&&d<=b||c>=e&&c<=b||d<=e&&c>=b)?!0:!1},_clipLine:function(k,d,a,c){for(var g=this._code(k,d),e=this._code(a,c);0!==g||0!==e;){if(0!==(g&e))return!1;var f=a-k,
b=c-d;0!==g?(k<this._xmin?(d+=b*(this._xmin-k)/f,k=this._xmin):k>this._xmax?(d+=b*(this._xmax-k)/f,k=this._xmax):d<this._ymin?(k+=f*(this._ymin-d)/b,d=this._ymin):d>this._ymax&&(k+=f*(this._ymax-d)/b,d=this._ymax),g=this._code(k,d)):(a<this._xmin?(c+=b*(this._xmin-a)/f,a=this._xmin):a>this._xmax?(c+=b*(this._xmax-a)/f,a=this._xmax):c<this._ymin?(a+=f*(this._ymin-c)/b,c=this._ymin):c>this._ymax&&(a+=f*(this._ymax-c)/b,c=this._ymax),e=this._code(a,c))}this._x0=k;this._y0=d;this._x1=a;this._y1=c;return!0},
_code:function(k,d){var a=0;k<this._xmin&&(a+=8);k>this._xmax&&(a+=4);d<this._ymin&&(a+=2);d>this._ymax&&(a+=1);return a}});A("extend-esri")&&z.setObject("layers.labelLayerUtils.DynamicLabelClass",B,E);return B})},"esri/layers/labelLayerUtils/StaticLabelClass":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../../kernel ../../geometry/Extent ../../geometry/Point ../../geometry/Polygon".split(" "),function(B,z,A,E,C,F,k){return B(null,{declaredClass:"esri.layers.labelLayerUtils.StaticLabel",
constructor:function(){this._preparedLabels=[];this._placedLabels=[];this._extent=null;this._ymax=this._ymin=this._xmax=this._xmin=0;this._scale=1;this._LINE_STEP_CONST=1.5;this._POLYGON_X_STEP_CONST=1;this._POLYGON_Y_STEP_CONST=0.75;this._OVERRUN=2},setMap:function(d,a){this._labelLayer=a;this._map=d;this._xmin=d.extent.xmin;this._xmax=d.extent.xmax;this._ymin=d.extent.ymin;this._ymax=d.extent.ymax;this._scale=(this._xmax-this._xmin)/d.width},_process:function(d){var a,c,g,e,f,b,h,m,u;this._preparedLabels=
d;this._placedLabels=[];for(d=this._preparedLabels.length-1;0<=d;d--){a=this._preparedLabels[d];f=a.labelWidth;b=a.labelHeight;m=(h=a.options)&&h.lineLabelPlacement?h.lineLabelPlacement:"PlaceAtCenter";u=h&&h.lineLabelPosition?h.lineLabelPosition:"Above";c=h&&h.labelRotation?h.labelRotation:!0;g=a.angle*(Math.PI/180);e=h&&h.howManyLabels?h.howManyLabels:"OneLabel";var n=[];if("point"===a.geometry.type)this._generatePointPositions(a.geometry.x,a.geometry.y,a.text,g,f,b,a.symbolWidth,a.symbolHeight,
h,n);else if("multipoint"===a.geometry.type)for(c=0;c<a.geometry.points.length;c++)this._generatePointPositions(a.geometry.points[c][0],a.geometry.points[c][1],a.text,g,f,b,a.symbolWidth,a.symbolHeight,h,n);else if("polyline"===a.geometry.type)if("PlaceAtStart"===m)this._generateLinePositionsPlaceAtStart(a.geometry,!0,a.text,f,b,2*a.symbolHeight+b,m,u,c,n);else if("PlaceAtEnd"===m)this._generateLinePositionsPlaceAtEnd(a.geometry,!0,a.text,f,b,2*a.symbolHeight+b,m,u,c,n);else{h=[];var l=a.geometry.getExtent(),
s=this._map.extent;if(l.getWidth()<f*this._scale/this._OVERRUN&&l.getHeight()<f*this._scale/this._OVERRUN)continue;else 0.5*l.getWidth()<s.getWidth()&&0.5*l.getHeight()<s.getHeight()?(l=0.1*Math.min(this._map.width,this._map.height)*this._scale,this._generateLinePositionsPlaceAtCenter(a.geometry,!1,l,a.text,f,b,2*a.symbolHeight+b,m,u,c,h)):(l=0.2*Math.min(this._map.width,this._map.height)*this._scale,this._generateLinePositionsPlaceAtCenter(a.geometry,!0,l,a.text,f,b,2*a.symbolHeight+b,m,u,c,h));
this._postSorting(s,h,n)}else if("polygon"===a.geometry.type){m=[];for(c=0;c<a.geometry.rings.length;c++)if(u=a.geometry.rings[c],!(1<a.geometry.rings.length)||k.prototype.isClockwise(u))h=this._calcRingExtent(u),h.xmax-h.xmin<4*f*this._scale/this._OVERRUN&&h.ymax-h.ymin<4*b*this._scale/this._OVERRUN||m.push(u);m.sort(function(a,b){return b.length-a.length});for(c=0;c<m.length;c++)this._generatePolygonPositionsForManyLabels(m[c],a.geometry.spatialReference,a.text,g,f,b,n)}for(c=0;c<n.length&&!(m=
n[c].x,u=n[c].y,void 0!==n[c].angle&&(g=n[c].angle),h=this._findPlace(a,a.text,m,u,g,f,b),"OneLabel"===e&&h&&this._labelLayer._isWithinScreenArea(new F(m,u,a.geometry.spatialReference)));c++);}return this._placedLabels},_generatePointPositions:function(d,a,c,g,e,f,b,h,m,k){c=m&&m.pointPriorities?m.pointPriorities:"AboveRight";e=(b+e)*this._scale;f=(h+f)*this._scale;switch(c.toLowerCase()){case "aboveleft":d-=e;a+=f;break;case "abovecenter":a+=f;break;case "aboveright":d+=e;a+=f;break;case "centerleft":d-=
e;break;case "centercenter":break;case "centerright":d+=e;break;case "belowleft":d-=e;a-=f;break;case "belowcenter":a-=f;break;case "belowright":d+=e;a-=f;break;default:return}k.push({x:d,y:a})},_generateLinePositionsPlaceAtStart:function(d,a,c,g,e,f,b,h,m,k){b=g*this._scale;var n=this._LINE_STEP_CONST*Math.min(this._map.width,this._map.height)*this._scale,l,s,r,p,y,v,q,w;for(l=0;l<d.paths.length;l++){var t=d.paths[l],x=b,D=0;for(s=0;s<t.length-1;s++)r=t[s][0],p=t[s][1],y=t[s+1][0],v=t[s+1][1],q=
y-r,w=v-p,q=Math.sqrt(q*q+w*w),D+q>x?(D=this._generatePositionsOnLine(d.spatialReference,a,x,n,D,r,p,y,v,c,g,e,f,h,m,k),x=n):D+=q}},_generateLinePositionsPlaceAtEnd:function(d,a,c,g,e,f,b,h,m,k){b=g*this._scale;var n=this._LINE_STEP_CONST*Math.min(this._map.width,this._map.height)*this._scale,l,s,r,p,y,v,q,w;for(l=0;l<d.paths.length;l++){var t=d.paths[l],x=b,D=0;for(s=t.length-2;0<=s;s--)r=t[s+1][0],p=t[s+1][1],y=t[s][0],v=t[s][1],q=y-r,w=v-p,q=Math.sqrt(q*q+w*w),D+q>x?(D=this._generatePositionsOnLine(d.spatialReference,
a,x,n,D,r,p,y,v,c,g,e,f,h,m,k),x=n):D+=q}},_generateLinePositionsPlaceAtCenter:function(d,a,c,g,e,f,b,h,m,k,n){var l,s,r,p,y,v,q,w;for(h=0;h<d.paths.length;h++){var t=d.paths[h];if(!(2>t.length)){if(2==t.length){p=t[0];l=t[1];r=p[0];p=p[1];t=l[0];v=l[1];y=(t-r)*(t-r)+(v-p)*(v-p);q=Math.atan2(v-p,t-r);v=Math.cos(q);q=Math.sin(q);t=[];w=r;for(var x=p;(w-r)*(w-r)+(x-p)*(x-p)<y;)t.push([w,x]),w+=c/2*v,x+=c/2*q;t.push(l)}var D=0;for(l=0;l<t.length-1;l++)r=t[l][0],p=t[l][1],y=t[l+1][0],v=t[l+1][1],q=y-
r,w=v-p,D+=Math.sqrt(q*q+w*w);for(l=x=0;l<t.length-1;l++){r=t[l][0];p=t[l][1];y=t[l+1][0];v=t[l+1][1];q=y-r;w=v-p;q=Math.sqrt(q*q+w*w);if(x+q>D/2)break;x+=q}l==t.length-1&&l--;r=t[l][0];p=t[l][1];y=t[l+1][0];v=t[l+1][1];q=y-r;w=v-p;x=D/2-x;q=Math.atan2(w,q);w=r+x*Math.cos(q);q=p+x*Math.sin(q);r=this._angleAndShifts(r,p,y,v,b,m,k);n.push({x:w+r.shiftX,y:q+r.shiftY,angle:r.angle});var D=w,G=q,x=0;for(s=l;s<t.length-1;s++)s==l?(r=D,p=G):(r=t[s][0],p=t[s][1]),y=t[s+1][0],v=t[s+1][1],q=y-r,w=v-p,q=Math.sqrt(q*
q+w*w),x=x+q>c?this._generatePositionsOnLine(d.spatialReference,a,c,c,x,r,p,y,v,g,e,f,b,m,k,n):x+q;x=0;for(s=l;0<=s;s--)s==l?(r=D,p=G):(r=t[s+1][0],p=t[s+1][1]),y=t[s][0],v=t[s][1],q=y-r,w=v-p,q=Math.sqrt(q*q+w*w),x=x+q>c?this._generatePositionsOnLine(d.spatialReference,a,c,c,x,r,p,y,v,g,e,f,b,m,k,n):x+q}}},_generatePositionsOnLine:function(d,a,c,g,e,f,b,h,m,k,n,l,s,r,p,y){k=Math.atan2(m-b,h-f);n=f;l=b;var v=n,q=l;do if(e=c-e,n+=e*Math.cos(k),l+=e*Math.sin(k),this._belongs(n,l,f,b,h,m))e=this._angleAndShifts(f,
b,h,m,s,r,p),c=n+e.shiftX,q=l+e.shiftY,a?this._labelLayer._isWithinScreenArea(new C(c,q,c,q,d))&&y.push({x:c,y:q,angle:e.angle}):y.push({x:c,y:q,angle:e.angle}),v=n,q=l,e=0,c=g;else return d=h-v,m-=q,Math.sqrt(d*d+m*m);while(1)},_postSorting:function(d,a,c){if(d&&0<a.length){var g=0.5*(d.xmin+d.xmax);d=0.5*(d.ymin+d.ymax);for(var e=a[0].x,f=a[0].y,b=Math.sqrt((e-g)*(e-g)+(f-d)*(f-d)),h=a[0].angle,m=0;m<a.length;m++){var k=a[m].x,n=a[m].y,l=Math.sqrt((k-g)*(k-g)+(n-d)*(n-d));l<b&&(e=k,f=n,b=l,h=a[m].angle)}c.push({x:e,
y:f,angle:h})}},_belongs:function(d,a,c,g,e,f){if(e==c&&f==g)return!1;if(e>c){if(d>e||d<c)return!1}else if(d<e||d>c)return!1;if(f>g){if(a>f||a<g)return!1}else if(a<f||a>g)return!1;return!0},_angleAndShifts:function(d,a,c,g,e,f,b){for(d=Math.atan2(g-a,c-d);d>Math.PI/2;)d-=Math.PI;for(;d<-(Math.PI/2);)d+=Math.PI;g=Math.sin(d);var h=Math.cos(d);c=a=0;"Above"==f&&(a=e*g*this._scale,c=e*h*this._scale);"Below"==f&&(a=-e*g*this._scale,c=-e*h*this._scale);e=[];e.angle=b?-d:0;e.shiftX=-a;e.shiftY=c;return e},
_generatePolygonPositionsForManyLabels:function(d,a,c,g,e,f,b){e=this._findCentroidForRing(d);g=e[0];var h=e[1],m=this._calcRingExtent(d);e=m.xmin;f=m.ymin;var k=m.xmax,m=m.ymax,n=(m-f)/(this._map.height*this._scale);if(!(10<(k-e)/(this._map.width*this._scale)&&10<n)){var l=!0;if(k-e>this._map.width*this._scale||m-f>this._map.height*this._scale)l=!1;var n=this._map.width*this._scale*(l?0.1875:0.5),l=this._map.height*this._scale*(l?0.1875:0.5),s=!0,r=!0,p=0;do{h+=(p%2?-1:1)*p*l;if(this._scanRingByX(c,
a,d,g,h,e,k,n,b))break;h<f&&(s=!1);h>m&&(r=!1);p++}while(s||r)}},_scanRingByX:function(d,a,c,g,e,f,b,h,m){var k=!0,n=!0,l=0,s=1E3;do{g+=(l%2?-1:1)*l*h;var r=this._movePointInsideRing(c,g,e),p=this._labelLayer._isWithinScreenArea(new C(r,e,r,e,a)),y=this._isPointWithinRing(d,c,r,e);if(p&&y)return m.push({x:r,y:e}),!0;g<f&&(k=!1);g>b&&(n=!1);l++;s--;if(0>=s)return!0}while(k||n);return!1},_movePointInsideRing:function(d,a,c){for(var g=[],e=d.length-1,f=d[0][1]>=d[e][1]?1:-1,b=0;b<=e;b++){var h=b,m=b+
1;b==e&&(m=0);var k=d[h][0],h=d[h][1],n=d[m][0],m=d[m][1],l=m>=h?1:-1;if(h<=c&&c<=m||m<=c&&c<=h)c!=h&&c!=m?(g.push((c-h)*(n-k)/(m-h)+k),f=l):c==h&&c!=m?(f!=l&&g.push(k),f=l):c!=h&&c==m?(g.push(n),f=l):c==h&&c==m&&(1==f&&g.push(k),g.push(n),f=l)}g.sort(function(a,b){return a-b});d=g.length;if(0<d){for(b=c=a=0;b<d-1;b+=2)e=Math.abs(g[b+1]-g[b]),e>a&&(a=e,c=b);a=(g[c]+g[c+1])/2}return a},_calcRingExtent:function(d){var a,c;c=new C;for(a=0;a<d.length-1;a++){var g=d[a][0],e=d[a][1];if(void 0===c.xmin||
g<c.xmin)c.xmin=g;if(void 0===c.ymin||e<c.ymin)c.ymin=e;if(void 0===c.xmax||g>c.xmax)c.xmax=g;if(void 0===c.ymax||e>c.ymax)c.ymax=e}return c},_isPointWithinPolygon:function(d,a,c,g){var e;for(e=0;e<a.rings.length;e++)if(this._isPointWithinRing(d,a.rings[e],c,g))return!0;return!1},_isPointWithinRing:function(d,a,c,g){var e,f,b,h,k=[],u=a.length;for(d=0;d<u-1;d++)if(e=a[d][0],f=a[d][1],b=a[d+1][0],h=a[d+1][1],!(e==b&&f==h)){if(f==h)if(g==f)k.push(e);else continue;e==b?(f<h&&(g>=f&&g<h)&&k.push(e),f>
h&&(g<=f&&g>h)&&k.push(e)):(f=(b-e)/(h-f)*(g-f)+e,e<b&&(f>=e&&f<b)&&k.push(f),e>b&&(f<=e&&f>b)&&k.push(f))}k.sort(function(a,b){return a-b});for(d=0;d<k.length-1;d++)if(e=k[d],b=k[d+1],c>=e&&c<b)if(d%2)break;else return!0;return!1},_findCentroidForRing:function(d){for(var a=d.length,c=[0,0],g=0,e=d[0][0],f=d[0][1],b=1;b<a-1;b++){var h=d[b][0],k=d[b][1],u=d[b+1][0],n=d[b+1][1],l=(h-e)*(n-f)-(u-e)*(k-f);c[0]+=l*(e+h+u);c[1]+=l*(f+k+n);g+=l}c[0]/=3*g;c[1]/=3*g;return c},_findCentroidForFeature:function(d){for(var a=
0,c=[0,0],g=0;g<d.rings.length;g++)for(var e=d.rings[g],f=e.length,b=e[0][0],h=e[0][1],k=1;k<f-1;k++){var u=e[k][0],n=e[k][1],l=e[k+1][0],s=e[k+1][1],r=(u-b)*(s-h)-(l-b)*(n-h);c[0]+=r*(b+u+l);c[1]+=r*(h+n+s);a+=r}c[0]/=3*a;c[1]/=3*a;return c},_findPlace:function(d,a,c,g,e,f,b){if(isNaN(c)||isNaN(g))return!1;for(var h=0;h<this._placedLabels.length;h++){var m=this._placedLabels[h].angle,u=this._placedLabels[h].width*this._scale,n=this._placedLabels[h].height*this._scale,l=this._placedLabels[h].x-c,
s=this._placedLabels[h].y-g;if(0===e&&0===m){if(this._findPlace2(-f*this._scale,-b*this._scale,f*this._scale,b*this._scale,l-u,s-n,l+u,s+n))return!1}else{var r=new C(-f*this._scale,-b*this._scale,f*this._scale,b*this._scale,null),p=0,y=1;0!==e&&(p=Math.sin(e),y=Math.cos(e));var v=l*y-s*p,l=l*p+s*y,m=m-e,p=Math.sin(m),y=Math.cos(m),q=-u*y- -n*p,s=-u*p+-n*y,m=+u*y- -n*p,w=+u*p+-n*y,u=v+q,n=l-s,p=v+m,y=l-w,q=v-q,s=l+s,v=v-m,l=l+w,m=new k;m.addRing([[u,n],[p,y],[q,s],[v,l],[u,n]]);if(r.intersects(m))return!1}}for(;e>
Math.PI/2;)e-=Math.PI;for(;e<-(Math.PI/2);)e+=Math.PI;h={};h.layer=d;h.text=a;h.angle=e;h.x=c;h.y=g;h.width=f;h.height=b;this._placedLabels.push(h);return!0},_findPlace2:function(d,a,c,g,e,f,b,h){return(d>=e&&d<=b||c>=e&&c<=b||d<=e&&c>=b)&&(a>=f&&a<=h||g>=f&&g<=h||a<=f&&g>=h)?!0:!1}})})},"*noref":1}});
define("esri/layers/LabelLayer","require dojo/_base/declare dojo/_base/lang dojo/number dojo/i18n!dojo/cldr/nls/number dojo/_base/array dojo/_base/connect dojo/has dojox/gfx/_base ../kernel ../lang ../graphic ../PopupInfo ./labelLayerUtils/DynamicLabelClass ./labelLayerUtils/StaticLabelClass ../symbols/TextSymbol ../symbols/ShieldLabelSymbol ../geometry/Extent ../geometry/Point ../geometry/webMercatorUtils ./GraphicsLayer ./LabelClass ../renderers/SimpleRenderer ../renderers/arcadeUtils".split(" "),function(B,
z,A,E,C,F,k,d,a,c,g,e,f,b,h,m,u,n,l,s,r,p,y,v){function q(a){return"sizeInfo"===a.type}B=z(r,{declaredClass:"esri.layers.LabelLayer",constructor:function(a){this._refreshLabels=A.hitch(this,this._refreshLabels);this.id="labels";this.featureLayers=[];this._featureLayerInfos=[];this._preparedLabels=[];this._engineType="STATIC";this._mapEventHandlers=[];a&&(a.id&&(this.id=a.id),a.mode&&(this._engineType="DYNAMIC"===a.mode.toUpperCase()?"DYNAMIC":"STATIC"))},_setMap:function(a){this._mapEventHandlers.push(a.on("extent-change",
A.hitch(this,"_handleLevelChange")));var b=this.inherited(arguments);this.refresh();return b},_unsetMap:function(){var a;for(a=0;a<this._mapEventHandlers.length;a++)k.disconnect(this._mapEventHandlers[a]);this.refresh();clearTimeout(this._refreshHandle);this._refreshHandle=null;this.inherited(arguments)},setAlgorithmType:function(a){this._engineType=a&&"DYNAMIC"===a.toUpperCase()?"DYNAMIC":"STATIC";this.refresh()},addFeatureLayer:function(a,b,c,d){if(!this.getFeatureLayer(a.layerId)){var f=[];f.push(a.on("update-end",
A.hitch(this,"refresh")));f.push(a.on("suspend",A.hitch(this,"refresh")));f.push(a.on("resume",A.hitch(this,"refresh")));f.push(a.on("edits-complete",A.hitch(this,"refresh")));f.push(a.on("labeling-info-change",A.hitch(this,"refresh")));f.push(a.on("time-extent-change",A.hitch(this,"refresh")));f.push(a.on("show-labels-change",A.hitch(this,"refresh")));this._featureLayerInfos.push({FeatureLayer:a,LabelExpressionInfo:c,LabelingOptions:d,LabelRenderer:b,EventHandlers:f});this.featureLayers.push(a);
this.refresh()}},getFeatureLayer:function(a){var b,c;for(b=0;b<this.featureLayers.length;b++)if(c=this.featureLayers[b],void 0!==c&&c.id==a)return c;return null},removeFeatureLayer:function(a){var b;a=this.getFeatureLayer(a);if(void 0!==a&&(b=F.indexOf(this.featureLayers,a),-1<b)){this.featureLayers.splice(b,1);for(a=0;a<this._featureLayerInfos[b].EventHandlers.length;a++)k.disconnect(this._featureLayerInfos[b].EventHandlers[a]);this._featureLayerInfos.splice(b,1);this.refresh()}},removeAllFeatureLayers:function(){var a;
for(a=0;a<this.featureLayers.length;a++){for(var b=0;b<this._featureLayerInfos[a].EventHandlers.length;b++)k.disconnect(this._featureLayerInfos[a].EventHandlers[b]);this.featureLayers=[];this._featureLayerInfos=[]}this.refresh()},getFeatureLayers:function(){return this.featureLayers},getFeatureLayerInfo:function(a){var b,c;for(b=0;b<this.featureLayers.length;b++)if(c=this.featureLayers[b],void 0!==c&&c.id==a)return this._featureLayerInfos[b];return null},refresh:function(){null==this._refreshHandle&&
(this._refreshHandle=setTimeout(this._refreshLabels,0))},_handleLevelChange:function(a){a.levelChange&&this.clear();this.refresh()},_refreshLabels:function(a){this._refreshHandle=null;var c,d,f,e,g,k=[],l,m="DYNAMIC"===this._engineType?new b:new h;if(this._map){m.setMap(this._map,this);this._preparedLabels=[];for(a=0;a<this.featureLayers.length;a++)if(d=this.featureLayers[a],d.visible&&d.showLabels&&d.visibleAtMapScale&&!d._suspended)if(c=this._featureLayerInfos[a],g=this._convertOptions(null),c.LabelRenderer){if(k=
d.labelingInfo)if(l=k[0])e=this._getLabelExpression(l),g=this._convertOptions(l);f=c.LabelRenderer;c.LabelExpressionInfo&&(e=c.LabelExpressionInfo);c.LabelingOptions&&(g=this._convertOptions(null),void 0!==c.LabelingOptions.pointPriorities&&(k=c.LabelingOptions.pointPriorities,g.pointPriorities="above-center"==k||"AboveCenter"==k||"esriServerPointLabelPlacementAboveCenter"==k?"AboveCenter":"above-left"==k||"AboveLeft"==k||"esriServerPointLabelPlacementAboveLeft"==k?"AboveLeft":"above-right"==k||"AboveRight"==
k||"esriServerPointLabelPlacementAboveRight"==k?"AboveRight":"below-center"==k||"BelowCenter"==k||"esriServerPointLabelPlacementBelowCenter"==k?"BelowCenter":"below-left"==k||"BelowLeft"==k||"esriServerPointLabelPlacementBelowLeft"==k?"BelowLeft":"below-right"==k||"BelowRight"==k||"esriServerPointLabelPlacementBelowRight"==k?"BelowRight":"center-center"==k||"CenterCenter"==k||"esriServerPointLabelPlacementCenterCenter"==k?"CenterCenter":"center-left"==k||"CenterLeft"==k||"esriServerPointLabelPlacementCenterLeft"==
k?"CenterLeft":"center-right"==k||"CenterRight"==k||"esriServerPointLabelPlacementCenterRight"==k?"CenterRight":"AboveRight"),void 0!==c.LabelingOptions.lineLabelPlacement&&(g.lineLabelPlacement=c.LabelingOptions.lineLabelPlacement),void 0!==c.LabelingOptions.lineLabelPosition&&(g.lineLabelPosition=c.LabelingOptions.lineLabelPosition),void 0!==c.LabelingOptions.labelRotation&&(g.labelRotation=c.LabelingOptions.labelRotation),void 0!==c.LabelingOptions.howManyLabels&&(g.howManyLabels=c.LabelingOptions.howManyLabels));
f instanceof p&&(e=this._getLabelExpression(f),f=new y(f.symbol),g=this._convertOptions(f));this._addLabels(d,f,e,g)}else if(k=d.labelingInfo)for(c=k.length-1;0<=c;c--)if(l=k[c])f=new p(l instanceof p?l.toJson():l),e=this._getLabelExpression(l),g=this._convertOptions(l),this._addLabels(d,f,e,g);e=m._process(this._preparedLabels);this.clear();this.drawLabels(this._map,e)}},drawLabels:function(a,b){this._scale=(a.extent.xmax-a.extent.xmin)/a.width;var c;for(c=0;c<b.length;c++){var d=b[c],f=d.x,g=d.y,
h=d.text,k=d.angle,n=d.layer.labelSymbol;"polyline"==d.layer.geometry.type&&d.layer.options.labelRotation&&n.setAngle(k*(180/Math.PI));n.setText(h);d=f;n instanceof m&&(f=n.getHeight(),k=Math.sin(k),d-=0.25*f*this._scale*k,g-=0.33*f*this._scale);k=new e(new l(d,g,a.extent.spatialReference));k.setSymbol(n);this.add(k)}},_addLabels:function(a,b,c,d){var f,e,g,k;if(this._isWithinScaleRange(b.minScale,b.maxScale)&&c&&""!==c){var h=this._map,l=!a.url&&!h.spatialReference.equals(a.spatialReference);for(f=
0;f<a.graphics.length;f++)if(e=a.graphics[f],!1!==e.visible){g=e.geometry;if(l){if(!s.canProject(g,h))continue;g=s.project(g,h)}g&&(this._isWhere(b.where,e.attributes)&&this._isWithinScreenArea(g))&&(k=this._buildLabelText(c,e,a.fields,d),this._addLabel(k,b,a.renderer,e,d,g,h))}}},_isWithinScreenArea:function(a){a="point"===a.type?new n(a.x,a.y,a.x,a.y,a.spatialReference):a.getExtent();if(void 0===a)return!1;a=this._intersects(this._map,a);return null===a||0===a.length?!1:!0},_isWithinScaleRange:function(a,
b){var c=this._map.getScale();return 0<a&&c>=a||0<b&&c<=b?!1:!0},_isWhere:function(a,b){try{if(!a)return!0;if(a){var c=a.split(" ");if(3===c.length)return this._sqlEquation(b[this._removeQuotes(c[0])],c[1],this._removeQuotes(c[2]));if(7===c.length){var d=this._sqlEquation(b[this._removeQuotes(c[0])],c[1],this._removeQuotes(c[2])),f=c[3],e=this._sqlEquation(b[this._removeQuotes(c[4])],c[5],this._removeQuotes(c[6]));switch(f){case "AND":return d&&e;case "OR":return d||e}}}return!1}catch(g){console.log("Error.: can't parse \x3d "+
a)}},_sqlEquation:function(a,c,b){switch(c){case "\x3d":return a==b?!0:!1;case "\x3c\x3e":return a!=b?!0:!1;case "\x3e":return a>b?!0:!1;case "\x3e\x3d":return a>=b?!0:!1;case "\x3c":return a<b?!0:!1;case "\x3c\x3d":return a<=b?!0:!1}return!1},_removeQuotes:function(a){var b=a.indexOf('"'),c=a.lastIndexOf('"');if(-1!=b&&-1!=c)return a.substr(1,a.length-2);b=a.indexOf("'");c=a.lastIndexOf("'");return-1!=b&&-1!=c?a.substr(1,a.length-2):a},_getSizeInfo:function(a){return a?a.sizeInfo||F.filter(a.visualVariables,
q)[0]:null},_addLabel:function(b,c,d,f,e,g,k){var h,l,n,p;if(b&&""!==A.trim(b)&&c){b=b.replace(/\s+/g," ");h=c.getSymbol(f);h instanceof m?(h=new m(h.toJson()),h.setVerticalAlignment("baseline"),h.setHorizontalAlignment("center")):h=h instanceof u?new u(h.toJson()):new m;h.setText(b);c.symbol=h;if(n=this._getProportionalSize(c.sizeInfo,f.attributes))h instanceof m?h.setSize(n):h instanceof u&&(h.setWidth(n),h.setHeight(n));p=n=0;if(d){l=d.getSymbol(f);var q=this._getSizeInfo(d),r;q&&(r=d.getSize(f,
{sizeInfo:q,resolution:k.getResolutionInMeters()}));if(r&&null!==r)n=p=r;else if(l)if("simplemarkersymbol"==l.type)p=n=l.size;else if("picturemarkersymbol"==l.type)n=l.width,p=l.height;else if("simplelinesymbol"==l.type||"cartographiclinesymbol"==l.type)n=l.width}d={};d.graphic=f;d.options=e;d.geometry=g;d.labelRenderer=c;d.labelSymbol=h;d.labelWidth=h.getWidth()/2;d.labelHeight=h.getHeight()/2;d.symbolWidth=a.normalizedLength(n)/2;d.symbolHeight=a.normalizedLength(p)/2;d.text=b;d.angle=h.angle;this._preparedLabels.push(d)}},
_buildLabelText:function(a,b,c,d){if(d.hasExpression)return a=v.executeFunction(d.compiledFunc,v.createExecContext(b,b._getView())),g.isDefined(a)?""+a:"";var e=b.attributes;return a.replace(/{[^}]*}/g,function(a){var b,h=a;for(b=0;b<c.length;b++)if("{"+c[b].name+"}"==a){var h=e[c[b].name],k=c[b].domain;if(k&&A.isObject(k)){if("codedValue"==k.type&&d.useCodedValues){b=h;for(a=0;a<k.codedValues.length;a++)if(k.codedValues[a].code==b){h=k.codedValues[a].name;break}}else"range"==k.type&&(k.minValue<=
h&&h<=k.maxValue)&&(h=k.name);break}k=c[b].type;if(d.fieldInfos){var l=d.fieldInfos;for(b=0;b<l.length;b++)if("{"+l[b].fieldName+"}"==a){a=l[b].format;if("esriFieldTypeDate"==k)(a="DateFormat"+f.prototype._dateFormats[a.dateFormat?a.dateFormat:"shortDate"])&&(h=g.substitute({myKey:h},"${myKey:"+a+"}"));else if(("esriFieldTypeInteger"==k||"esriFieldTypeSingle"==k||"esriFieldTypeSmallInteger"==k||"esriFieldTypeLong"==k||"esriFieldTypeDouble"==k)&&a)h=E.format(h,{places:a.places}),a.digitSeparator||
C.group&&(h=h.replace(RegExp("\\"+C.group,"g"),""));break}}break}else h="";return null===h?"":h})},_getLabelExpression:function(a){var b="";a.labelExpressionInfo?b=a.labelExpressionInfo.value||a.labelExpressionInfo.expression:this._validSyntax(a.labelExpression)&&(b=this._convertLabelExpression(a.labelExpression));return b},_validSyntax:function(a){return/^(\s*\[[^\]]+\]\s*)+$/i.test(a)},_convertLabelExpression:function(a){return a.replace(RegExp("\\[","g"),"{").replace(RegExp("\\]","g"),"}")},_getProportionalSize:function(a,
b){if(!a)return null;var c=g.substitute(b,"${"+a.field+"}",{first:!0});return!a.minSize||!a.maxSize||!a.minDataValue||!a.maxDataValue||!c||0>=a.maxDataValue-a.minDataValue?null:(a.maxSize-a.minSize)/(a.maxDataValue-a.minDataValue)*(c-a.minDataValue)+a.minSize},_convertOptions:function(a){var b=!0,c="shortDate",d=null,f=null,e="",g=!0,h,k;if(a&&(a.format&&(c=a.format.dateFormat,d={places:a.format.places,digitSeparator:a.format.digitSeparator}),f=a.fieldInfos,e=a.labelPlacement,null!=a.useCodedValues&&
(b=a.useCodedValues),a=a.labelExpressionInfo)){var l=a.expression;l&&!a.value&&(k=!0,h=v.createFunction(l))}if("always-horizontal"==e||"esriServerPolygonPlacementAlwaysHorizontal"==e)g=!1;return{useCodedValues:b,dateFormat:c,numberFormat:d,fieldInfos:f,pointPriorities:"above-center"==e||"esriServerPointLabelPlacementAboveCenter"==e?"AboveCenter":"above-left"==e||"esriServerPointLabelPlacementAboveLeft"==e?"AboveLeft":"above-right"==e||"esriServerPointLabelPlacementAboveRight"==e?"AboveRight":"below-center"==
e||"esriServerPointLabelPlacementBelowCenter"==e?"BelowCenter":"below-left"==e||"esriServerPointLabelPlacementBelowLeft"==e?"BelowLeft":"below-right"==e||"esriServerPointLabelPlacementBelowRight"==e?"BelowRight":"center-center"==e||"esriServerPointLabelPlacementCenterCenter"==e?"CenterCenter":"center-left"==e||"esriServerPointLabelPlacementCenterLeft"==e?"CenterLeft":"center-right"==e||"esriServerPointLabelPlacementCenterRight"==e?"CenterRight":"AboveRight",lineLabelPlacement:"above-start"==e||"below-start"==
e||"center-start"==e?"PlaceAtStart":"above-end"==e||"below-end"==e||"center-end"==e?"PlaceAtEnd":"PlaceAtCenter",lineLabelPosition:"above-after"==e||"esriServerLinePlacementAboveAfter"==e||"above-along"==e||"esriServerLinePlacementAboveAlong"==e||"above-before"==e||"esriServerLinePlacementAboveBefore"==e||"above-start"==e||"esriServerLinePlacementAboveStart"==e||"above-end"==e||"esriServerLinePlacementAboveEnd"==e?"Above":"below-after"==e||"esriServerLinePlacementBelowAfter"==e||"below-along"==e||
"esriServerLinePlacementBelowAlong"==e||"below-before"==e||"esriServerLinePlacementBelowBefore"==e||"below-start"==e||"esriServerLinePlacementBelowStart"==e||"below-end"==e||"esriServerLinePlacementBelowEnd"==e?"Below":"center-after"==e||"esriServerLinePlacementCenterAfter"==e||"center-along"==e||"esriServerLinePlacementCenterAlong"==e||"center-before"==e||"esriServerLinePlacementCenterBefore"==e||"center-start"==e||"esriServerLinePlacementCenterStart"==e||"center-end"==e||"esriServerLinePlacementCenterEnd"==
e?"OnLine":"Above",labelRotation:g,howManyLabels:"OneLabel",hasExpression:k,compiledFunc:h}}});d("extend-esri")&&A.setObject("layers.LabelLayer",B,c);return B});